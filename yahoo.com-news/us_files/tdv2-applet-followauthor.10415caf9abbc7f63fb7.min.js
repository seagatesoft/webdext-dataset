webpackJsonp([56],{1216:function(e,t,a){e.exports={controllerViews:{FollowAuthor:a(2647),FollowHeadlines:a(2648)},stores:{FollowAuthorStore:a(1449)}}},1449:function(e,t,a){"use strict";e.exports=a(16)({storeName:"FollowAuthorStore",statics:{handlers:{LOAD_FOLLOW_AUTHORS_SUCCESS:"_loadAuthors",FOLLOW_AUTHORS_UPDATE_CATEGORY:"_setPageCategory"}},initialize:function(){this.authors=[],this.categories={},this.headlines={},this.pageCategory=""},_loadAuthors:function(e){if(e){this.authors=e.authors||[],this.headlines[e.category]=e.headlines||[];var t=e.category;if(t){var a=this.categories[t]||{};a.authors=e.authors||[],a.headlines=e.headlines||[],this.categories[t]=a}}this.emitChange()},_setPageCategory:function(e){"object"!=typeof e&&(e={category:e}),-1!==["YPROP","LISTID","YCT","WIKIID","YMAG","YUMBLR","MAGTOPICTAG","YMEDIA"].indexOf(e.category.split(":")[0])&&(this.pageCategory=e.category||"",this.emitChange())},getPageCategory:function(){return this.pageCategory},getAuthors:function(e){return e?a(2)(this.categories,[e,"authors"])||[]:this.authors},getHeadlines:function(e){return this.headlines[e]||[]},dehydrate:function(){return{authors:this.authors,categories:this.categories,headlines:this.headlines,pageCategory:this.pageCategory}},rehydrate:function(e){this.authors=e.authors,this.categories=e.categories,this.headlines=e.headlines,this.pageCategory=e.pageCategory}})},2238:function(e,t,a){"use strict";var n=a(3)("FollowAuthor:loadAuthors");e.exports=function(e,t,s){var r=t.componentProps||{},i=r.componentConfig||{},o=i.category||"";if(0===o.indexOf("EXCLUSIVE:"))return void a(2645)(e,t,s);if(i.useListId)return void a(2646)(e,t,s);var l=i.site||"news",u=i.authorCount||2,c=i.headlineCount||1,m=i.authors||{},h=e.getStore(a(1449)),p=e.getStore(a(18)).getCurrentRoute()||{},d=i.useRouteAuthor||0;if(!m[l])return s&&s();if(m=m[l],d&&m.isObject){var g=a(2)(p,["params","section"],null),f=m[g];m=f?[f]:[]}var C=h.getAuthors().reduce(function(e,t){return e[t.listId]=!0,e},{});if(m=m.slice(0,u).map(function(e){return Object.assign({},e)}).filter(function(e){return!0!==C[e.listId]}),0===m.length)return n("Store already contains all requested authors, skipping service call"),s&&s();e.dispatch("LOAD_FOLLOW_AUTHORS_START",m),a(22).each(m,function(t,a){if(0===i.headlineCount)return t.headlines=[],void a();var n={category:"LISTID:"+t.listId,count:c,timeout:e.session.query.timeout||i.timeout};t.thumbConfig&&"object"==typeof t.thumbConfig&&(n.resize=t.thumbConfig),e.service.read("CommonStreamService",n,{},function(n,s){n||!s?(t.headlines=[],e.logger.log("ERROR: Fetch headline fail for author",t.name)):t.headlines=s.length?s.slice(0,c):s,a()})},function(){e.dispatch("LOAD_FOLLOW_AUTHORS_SUCCESS",{category:o,authors:m}),s&&s()})}},2645:function(e,t,a){"use strict";var n=a(109).getContentSite,s=function(e,t,s,r){var i=e.getStore(a(18)).getCurrentRoute()||{},o=a(2)(t,["componentProps","componentConfig","timeout"]),l=a(2)(t,["componentProps","componentConfig","enableContentSite"]),u={timeout:e.session.query.timeout||o};l&&(u.site=n(i,e)),e.service.read("NewsExclusiveService",u,{},function(t,n){if(t||!n)return e.dispatch("LOAD_FOLLOW_AUTHORS_FAILURE",t||"No data returned from api"),void(r&&r(t));var i=n.map(function(e){var t=e.author||{};return{authorUrl:t.url,headlines:[{externalLink:e.externalLink,provider:e.provider,published:e.published,title:e.title,type:e.type,url:e.url,uuid:e.uuid}],imgUrl:a(2)(t,["image","url"]),name:t.name}});e.dispatch("LOAD_FOLLOW_AUTHORS_SUCCESS",{category:s,authors:i}),r&&r()})};e.exports=function(e,t,n){var r=a(2)(t,["componentProps","componentConfig","category"]),i=e.getStore(a(1449)),o=i.getAuthors(r);if(o&&o.length>0)return void(n&&n());s(e,t,r,n)}},2646:function(e,t,a){"use strict";e.exports=function(e,t,n){var s=t.componentProps||{},r=s.componentConfig;if(!r.listId)return n&&n();var i=e.getStore(a(1449)),o=r.headlineCount||1,l=r.authorCount||2,u={category:"LISTID:"+r.listId,resize:r.thumbConfig,count:r.count,timeout:e.session.query.timeout||r.timeout};if(r.outlink_enabled&&(u.link_out_allowed=!0),r.usePageCategory){var c=i.getPageCategory();c&&(u.category=c)}e.service.read("CommonStreamService",u,{},function(t,a){if(t||!a)return e.dispatch("LOAD_FOLLOW_AUTHORS_FAILURE",t),void(n&&n(t));var s={},i=0;a.forEach(function(e){var t=e.author;!s[t]&&i<l?(s[t]={name:t},s[t].headlines=o>0?[e]:[],i++):s[t]&&s[t].headlines.length<o&&s[t].headlines.push(e)});var u=[];for(var c in s)if(s.hasOwnProperty(c)){var m=s[c];u.push(m)}e.dispatch("LOAD_FOLLOW_AUTHORS_SUCCESS",{category:r.listId,authors:u,headlines:a}),n&&n()})}},2647:function(e,t,a){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=a(28).FormattedRelative,r=a(28).FormattedDate;e.exports=a(4)({mixins:[a(14)],displayName:"FollowAuthor",autobind:!1,statics:{initializeAction:a(2238),storeListeners:[a(1449)],componentConfig:{name:"componentFollowAuthor"}},propTypes:{className:a(0).string,header:a(0).node,headerText:a(0).string,headerClasses:a(0).string,view:a(0).string,itemClassName:a(0).string,itemLinkClassName:a(0).string,imgClassName:a(0).string,contentClassName:a(0).string,nameClassName:a(0).string,titleClassName:a(0).string,linkClassName:a(0).string,linkAttributes:a(0).object,LinkComponent:a(0).oneOfType([a(0).string,a(0).func])},getDefaultProps:function(){return{className:"Pos(r) Ov(h) Mt(50px)",itemClassName:"Mb(50px) Mih(84px) Pos(r)",itemLinkClassName:"",imgClassName:"Bdrs(48%) Pos(a) Start(0) W(84px) H(84px)",contentClassName:"D(ib) Va(t) Mstart(94px)",linkClassName:"Fz(18px) Lh(22px) Fw(b) C(#3c3c5b) C(#0078ff):h Td(n) W(100%)",linkAttributes:{},LinkComponent:a(278),nameClassName:"C(#7800ff) D(b) Fz(14px) Fw(b) Lh(18px)",titleClassName:"C(#198fff) D(b) Fz(14px) Fw(b) Lh(18px) Mt(2px)",view:"normal",showRelativeDate:!0,showProvider:!0}},componentWillMount:function(){this.onChange=this.onChange.bind(this)},componentDidMount:function(){this.prefetchHeadlines()},componentDidUpdate:function(e,t){this.prefetchHeadlines()},getInitialState:function(){return{authors:this.getStore(a(1449)).getAuthors()||[]}},onChange:function(){this.setState({authors:this.getStore(a(1449)).getAuthors()||[]})},generateRapidDataAttr:function(e){return{sec:"follow",subsec:"article",slk:e.title,elm:"hdln",outcm:"content",itc:0}},prefetchHeadlines:function(){for(var e=this.state.authors,t=[],n=e.length,s=0;s<n;s++){var r=e[s].headlines||{};r.length?t.push(r[0].uuid||""):r.uuid&&t.push(r.uuid||"")}t.length&&this.context.executeAction(a(507),{uuids:t})},getTypeIcon:function(e){if(a(2)(e,["image_assets","image_asset_type"])){var t={backgroundImage:'url("https://s.yimg.com/dh/ap/default/150922/sprite-megastream-092215-jt.png")',backgroundRepeat:"no-repeat",backgroundSize:"204px"},n=this.props.typeIcon||e.image_assets.image_asset_type;return"video"===n?t.backgroundPosition="-124px -25px":"photo"===n?t.backgroundPosition="-164px -25px":t={},a(1).createElement("span",{className:"Pos(a) Start(56px) B(-100px) W(40px) H(40px)",style:t})}},renderFujifiedVersion:function(){var e,t=this,i=this.props,o=t.state.authors,l=i.linkAttributes,u=i.LinkComponent,c=o.map(function(e,o){var c,m=e.headlines.map(function(o,m){0===m&&(c=e.imgUrl||o.resizedImage||o.image||"https://s.yimg.com/os/mit/media/dh/ap/default/150922/no-image.png");var h,p;o.published&&(h=i.showRelativeDate?a(1).createElement(s,{value:o.published}):a(1).createElement(r,{value:o.published,day:"numeric",month:"long",year:"numeric"}),p=i.showProvider?a(1).createElement("i",{"aria-hidden":"true",className:"Mx(4px)"},"•"):null);var d=i.showProvider?o.provider:null;return a(1).createElement("li",{className:"List(n)",key:m},a(1).createElement(u,n({className:"Fz(s) Fw(b) C(#020e65) LineClamp(3,66px) C(#0078ff):h Td(n) W(100%) Lh(17px) Mt(6px)",href:o.url,i13nModel:t.generateRapidDataAttr(o)},l),o.title),a(1).createElement("div",{className:"Mt(4px) Fz(11px) C(#787d82)"},d,p,h))});if(m.length>0&&e.headlines[0])return a(1).createElement("li",{className:"author-follow Mb(18px) Mih(90px) Pos(r)","data-id":e.name,key:o},a(1).createElement(u,n({className:"Td(n) D(b) Pos(r)",href:e.headlines[0].url,i13nModel:t.generateRapidDataAttr(e.headlines[0])},t.props.linkAttributes),a(1).createElement(a(73),{className:"Bdrs(48%) Pos(a) Start(0) W(90px) H(90px)",forceLoad:!0,url:c,title:e.name}),t.getTypeIcon(e.headlines[0])),a(1).createElement("div",{className:"D(ib) Va(t) Mstart(108px)"},a(1).createElement("span",{className:"D(b) Fz(13px) Fw(600) C(#0081f2)"},e.name),a(1).createElement("ul",{className:"M(0) P(0) Mt(2px) List(n)"},m)))});return e=i.header?i.header:i.headerText?a(1).createElement("div",{className:i.headerClasses},i.headerText):null,a(1).createElement("div",{id:this.props.id,className:a(5)("tdv2-applet-followauthor",i.className)},e,a(1).createElement("ul",{className:"M(0) P(0)"},c))},render:function(){var e=this,t=this.props,s=e.state.authors;if(!s||!s.length)return null;if("fuji"===t.view)return this.renderFujifiedVersion();var r=a(5)("tdv2-applet-followauthor",t.className),i=a(5)("author-follow",t.itemClassName),o=t.linkAttributes,l=t.LinkComponent,u=a(2)(this,["props","componentConfig","showProvider"],!1),c=this.props.headline,m=null;return c&&(m=a(1).createElement("div",{className:t.headlineClassName},c)),a(1).createElement("div",{id:this.props.id,className:r},m,a(1).createElement("ul",{className:"M(0) P(0)"},s.map(function(s,r){return a(1).createElement("li",{className:i,"data-id":s.name,key:r},a(1).createElement(l,{href:s.authorUrl,followLink:s.authorUrl&&"/"!==s.authorUrl[0]},a(1).createElement(a(73),{className:t.imgClassName,forceLoad:!0,url:s.imgUrl,title:s.name})),a(1).createElement("div",{className:t.contentClassName},a(1).createElement(l,{className:t.itemLinkClassName,href:s.authorUrl,followLink:s.authorUrl&&"/"!==s.authorUrl[0]},a(1).createElement("span",{className:t.nameClassName},s.name)),a(1).createElement("span",{className:t.titleClassName},s.title),a(1).createElement("ul",{className:"M(0) P(0) Mt(2px) List(n)"},s.headlines.map(function(s,r){var i;return u&&(i=a(1).createElement("div",{className:t.providerClassName},s.provider)),a(1).createElement("li",{className:"List(n)",key:r},a(1).createElement(l,n({className:t.linkClassName,href:s.url,followLink:s.url&&"/"!==s.url[0],i13nModel:e.generateRapidDataAttr(s)},o),s.title),i)}))))})))}})},2648:function(e,t,a){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=a(28).FormattedRelative,r=a(28).FormattedDate;e.exports=a(4)({displayName:"FollowHeadlines",autobind:!1,mixins:[a(14)],statics:{initializeAction:a(2238),storeListeners:[a(1449)],componentConfig:{name:"componentFollowHeadlines"}},propTypes:{alphatarClassName:a(0).string,alphatarSize:a(0).number,authorClassName:a(0).string,className:a(0).string,contentClassName:a(0).string,header:a(0).node,headerText:a(0).string,headerClasses:a(0).string,imgClassName:a(0).string,itemClassName:a(0).string,linkClassName:a(0).string,linkAttributes:a(0).object,LinkComponent:a(0).oneOfType([a(0).string,a(0).func]),nameClassName:a(0).string,showDate:a(0).bool,subTitleClassName:a(0).string,titleClassName:a(0).string},getDefaultProps:function(){return{alphatarClassName:"Mend(10px) Va(m) Pos(a) Start(0)",alphatarSize:80,authorClassName:"D(b) Fz(13px) Fw(600) C(#0081f2)",className:"Pos(r) Ov(h) Mt(50px)",contentClassName:"D(ib) Va(t) Mstart(103px)",imgClassName:"Bdrs(48%) Pos(a) Start(0) W(80px) H(80px)",itemClassName:"Mb(50px) Mih(84px) Pos(r)",linkAttributes:{},linkClassName:"Fz(s) Fw(b) C(#020e65) LineClamp(3,66px) C(#0078ff):h Td(n) W(100%) Lh(17px) Mt(6px)",LinkComponent:a(278),nameClassName:"C(#7800ff) D(b) Fz(14px) Fw(b) Lh(18px)",showDate:!0,showRelativeDate:!0,showProvider:!0,subTitleClassName:"Mt(4px) Fz(11px) C(#787d82)",titleClassName:"C(#198fff) D(b) Fz(14px) Fw(b) Lh(18px) Mt(2px)",useAlphatar:!1}},getInitialState:function(){var e=this.props;return this.followAuthorStore=this.getStore(a(1449)),{headlines:this.followAuthorStore.getHeadlines(e.componentConfig.listId)||[]}},componentWillMount:function(){this.onChange=this.onChange.bind(this)},componentDidMount:function(){this.prefetchHeadlines()},componentDidUpdate:function(e,t){this.prefetchHeadlines()},onChange:function(){this.setState({headlines:this.followAuthorStore.getHeadlines(this.props.componentConfig.listId)||[]})},generateRapidDataAttr:function(e){return{sec:"follow",subsec:"article",slk:e.title,elm:"hdln",outcm:"content",itc:0}},prefetchHeadlines:function(){var e=this.state.headlines,t=e.map(function(e){return e.uuid});t.length&&this.context.executeAction(a(507),{uuids:t})},getTypeIcon:function(e){if(e&&e.image_assets&&e.image_assets.image_asset_type){var t={backgroundImage:'url("https://s.yimg.com/dh/ap/default/150922/sprite-megastream-092215-jt.png")',backgroundRepeat:"no-repeat",backgroundSize:"204px"},n=this.props.typeIcon||e.image_assets.image_asset_type;return"video"===n?t.backgroundPosition="-124px -25px":"photo"===n?t.backgroundPosition="-164px -25px":t={},a(1).createElement("span",{className:"Pos(a) Start(51px) B(-92px) W(40px) H(40px)",style:t})}},render:function(){var e=this,t=this.props,i=t.componentConfig,o=e.state.headlines;if(!o||!o.length)return null;var l,u,c,m,h=t.linkAttributes,p=t.LinkComponent,d=o.map(function(c,d){if(!c.url)return!0;t.showDate&&c.published&&(l=t.showRelativeDate?a(1).createElement(s,{value:c.published}):a(1).createElement(r,{value:c.published,day:"numeric",month:"long",year:"numeric"}),u=t.showProvider?a(1).createElement("i",{"aria-hidden":"true",className:"Mx(4px)"},"•"):null);var g=t.showProvider?c.provider:null,f=c.resizedImage||c.image||"https://s.yimg.com/os/mit/media/dh/ap/default/150922/no-image.png";m=t.useAlphatar?a(1).createElement(a(1165),{name:g,enableAlphatar:!0,size:t.alphatarSize,className:t.alphatarClassName}):a(1).createElement(a(73),{className:t.imgClassName,forceLoad:!0,url:f,title:c.title});var C={url:c.url,contentId:c.uuid};if(i.simulateCluster){var v=o.reduce(function(e,t){return t.uuid!==C.contentId&&e.push(t.uuid),e},[]);h.navParams={uuid:C.contentId,relatedUuids:v}}return a(1).createElement("li",{className:"follow-headlines Mb(18px) Mih(80px) Pos(r)","data-id":c.author,key:"headline-"+c.url},a(1).createElement(a(1149),{enabled:i.enablePreRender,nodeName:"div",payload:C,renderTargetId:i.relativeLinkRenderTargetId},a(1).createElement(p,n({className:"Td(n) D(b) Pos(r)",href:c.url,i13nModel:e.generateRapidDataAttr(c)},h),m,e.getTypeIcon(c))),a(1).createElement("div",{className:t.contentClassName},a(1).createElement("span",{className:t.authorClassName},c.author),a(1).createElement(a(1149),{className:"M(0) P(0) Mt(2px) List(n)",enabled:i.enablePreRender,nodeName:"div",payload:C,renderTargetId:i.relativeLinkRenderTargetId},a(1).createElement(p,n({className:t.linkClassName,href:c.url,i13nModel:e.generateRapidDataAttr(c)},h),c.title),a(1).createElement("div",{className:t.subTitleClassName},g,u,l))))});return c=t.headerText?a(1).createElement("div",{className:t.headerClasses},t.headerText):null,a(1).createElement("div",{id:t.id,className:a(5)("tdv2-applet-followauthor",t.className)},c,a(1).createElement("ul",{className:"M(0) P(0)"},d))}})}});